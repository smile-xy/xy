<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DOM</title>
    <script type="text/javascript" src="D:\github\myTool.js"></script>
</head>
<body>

<!-- 小试牛刀 -->

    <!-- <div></div>
    <script>
    // dom 对象
    var div = document.getElementsByTagName('div')[0];
    div.style.width = '100px';
    div.style.height = '100px';
    div.style.backgroundColor = '#eee';

    var count = 0;
    div.onclick = function() {

        count++;
        if (count % 2 == 1) {
            this.style.backgroundColor = '#aaa';
        } else {
            this.style.backgroundColor = '#eee';
        }
    }
    </script>  -->


    <!-- <style>
        .content {
            display: none;
            border:2px solid #eee;
            width: 120px;
            height: 100px;
        }
        div .active {
            background-color: #f50;
        }
    </style>

    <div class="wrap">
        <button class="active">111</button>
        <button>222</button>
        <button>333</button>
        <div class="content" style="display: block;">AAAAAAAAAAA</div>
        <div class="content">BBBBBBBBBB</div>
        <div class="content">CCCCCCCCCCC</div>
    </div>

    <script>
    var btn = document.getElementsByTagName('button');
    var div = document.getElementsByClassName('content');

    for (var i = 0; i < btn.length; i++) {
        (function (act) {
            btn[i].onclick = function () {

                for (var j = 0; j < btn.length; j++) {
                    btn[j].className = '';
                    div[j].style.display = 'none';
                }
                this.className = 'active';
                div[act].style.display = 'block';
            };
        }(i));
    }
    </script>  -->


    <!-- <script>
    var div = document.createElement('div');
    document.body.appendChild(div);
    div.style.width = '100px';
    div.style.height = '100px';
    div.style.backgroundColor = '#eee';
    div.style.position = 'absolute';
    div.style.top = '100px';
    div.style.left = '100px';

    ////方块加速移动
    // var speed = 1;
    // var timer = setInterval(function () {

    //     speed += speed/20;
    //     div.style.left = parseInt(div.style.left) + speed + 'px';
    //     div.style.top = parseInt(div.style.top) + speed + 'px';
    //     if (parseInt(div.style.left) > 400 && parseInt(div.style.top) > 400) {
    //         clearInterval(timer);
    //     }
    // }, 35);

    ////方向键控制方块移动
    document.onkeydown = function (e) {
        // console.log(e)
        var speed = 100;
        switch (e.which) {
            case 38:
                div.style.top = parseInt(div.style.top) - speed + 'px';
                break;
            case 40:
                div.style.top = parseInt(div.style.top) + speed + 'px';
                break;
            case 37:
                div.style.left = parseInt(div.style.left) - speed + 'px';
                break;
            case 39:
                div.style.left = parseInt(div.style.left) + speed + 'px';
                break;
            default:
                break;
        }
    }
    </script> -->


    <!-- <style>
        /* 模仿画笔 */
        * {
            margin: 0;
            padding: 0;
        }
        li {
            box-sizing:border-box;
            float: left;
            width: 20px;
            height: 20px;
            border: 1px solid black;
            list-style: none;
        }
        ul {
            width: 300px;
            height: 300px;
        }
    </style>
    <ul>
        <li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li>
    </ul>
    <script>
    var ul = document.getElementsByTagName('ul')[0];
    ul.onmouseover = function (e) {
        var event = e || window.event;
        var target = event.target || event.srcElement;

        target.style.backgroundColor = 'rgb(255,255,' + target.getAttribute('img-date') +')';
        target.setAttribute('img-date', parseInt(target.getAttribute('img-date')) + 20);
    }
    </script> -->

<!-- DOM基本操作 -->

    <!-- <div id="only" class="d-class">
        <span>
            <strong>1</strong>
        </span>
        <strong>2</strong>
    </div>
    <input name="my-name">
    <script>

    // document生成的大部分都是类数组
    var id = document.getElementById('only');
    var tagName = document.getElementsByTagName('div')[0];
    var cName = document.getElementsByClassName('d-class')[0]; // ie8及以下版本不支持
    var name = document.getElementsByName('my-name')[0]; // 只有带name属性的标签可生效

    // query选出来的元素不是实时的,是静态副本
    var strong = document.querySelector('div > span strong');
    var strong1 = document.querySelectorAll('strong')[0];
    </script> -->

<!-- 遍历节点树 -->

    <!-- <div>
        第一句话和空格一起算文本
        <strong></strong>
        <span></span>
    </div>

    <script>
    var div = document.getElementsByTagName('div')[0];
    var strong = document.getElementsByTagName('strong')[0];

    console.log(div.parentNode); // 父节点
    console.log(div.childNodes); // 子节点们
    console.log(div.childNodes.length);
    // 元素节点 ———— Node.ELEMENT_NODE(1)
    // 属性节点 ———— Node.ATTRIBUTE_NODE(2)
    // 文本节点 ———— Node.TEXT_NODE(3)
    // 注释节点 ———— Node.COMMENT_NODE(8)
    // document节点 ———— Node.DOCUMENT_NODE(9)
    // DocumentsFragment ———— Node.DOCUMENT_FRAGMENT_NODE(11)

     console.log(div.firstChild); // 第一个子节点
     console.log(div.lastChild); // 最后一个子节点
     console.log(strong.nextSibling); // 后一个兄弟节点
     console.log(strong.perviousSibling); // 前一个兄弟节点
    </script> -->

<!-- 遍历元素节点树 -->

    <!-- <div>
        第一句话和空格一起算文本
        <strong></strong>
        <span></span>
        <em></em>
        <i></i>
        <b></b>
    </div> -->

    <script>
    '除了children以外 IE8及以下不兼容'
    // var div = document.getElementsByTagName('div')[0];
    // var strong = document.getElementsByTagName('strong')[0];

    // console.log(div.parentElement); // 返回当前元素的父元素节点
    // console.log(div.children); // 只返回当前元素的元素子节点
    // console.log(div.firstElementChild); // 返回第一个元素子节点
    // console.log(div.lastElementChild); // 返回最后一个元素子节点

    // console.log(strong.nextElementSibling); // 返回最后一个兄弟元素
    // console.log(strong.previousElementSibling); // 返回前一个兄弟元素
    </script>



    <!-- <div>
        第一句话和空格一起算文本
        <strong></strong>
        <span></span>
    </div>
    <div>
    </div> -->

    <script>
'节点的四个属性'
    // var div = document.getElementsByTagName('div')[0];
    // console.log(div.childNodes[1].nodeName); // 元素的标签名，以大写形式表示，只读

    // console.log(div.childNodes[0].nodeValue); // text 节点或comment 节点的文本内容，可读写
    // div.childNodes[0].nodeValue = '字体已修改';
    // console.log(div.childNodes[0].nodeValue);

    // console.log(div.childNodes[1].nodeType); // 该节点的类型，只读
    // // 元素节点 ———— Node.ELEMENT_NODE(1)
    // // 属性节点 ———— Node.ATTRIBUTE_NODE(2)
    // // 文本节点 ———— Node.TEXT_NODE(3)
    // // 注释节点 ———— Node.COMMENT_NODE(8)
    // // document节点 ———— Node.DOCUMENT_NODE(9)
    // // DocumentsFragment ———— Node.DOCUMENT_FRAGMENT_NODE(11)
    // console.log(div.childNodes[1].attributes); // Element节点的属性集合

    // var div2 = document.getElementsByTagName('div')[0];
    // console.log(div2.hasChildNodes()); // 是否有自己的子节点

    // function retElementChild(node) {
    //     //no children
    //     var temp = {
    //             length: 0,
    //             push: Array.prototype.push
    //     },
    //         child = node.childNodes,
    //         len = child.length;

    //     for (var i = 0; i < len; i++) {

    //         if (child[i].nodeType === 1) {
    //             temp.push(child[i]);
    //         }
    //     }
    //     return temp;
    // }
    // console.log(retElementChild(div));

    '继承关系'
    // HTMLBodyElement.prototype.abc = 'demo';
    // var body = document.getElementsByTagName('body')[0];
    // var head = document.getElementsByTagName('head')[0];
    // console.log(body.abc +' '+ head.abc);

    // HTMLElement.prototype.abc = 'demo';
    // var body = document.getElementsByTagName('body')[0];
    // var head = document.getElementsByTagName('head')[0];
    // console.log(body.abc +' '+ head.abc);


    '1. 遍历元素节点树(原型链上编程)'
    </script>


    <!-- <div>
        <b></b>
        abc -->
        <!-- this is comment -->
        <!-- <strong>
            <span>
                <i></i>
            </span>
        </strong>
    </div> -->
    <script>
    '2. 封装函数，返回元素e 的第n层父元素节点'
    // function retParent(elem, n) {
    //     while(n && elem) {
    //         elem = elem.parentElement;
    //         n--;
    //     }
    //     return elem;
    // }
    // var i = document.getElementsByTagName('i')[0];


    </script>
    <!-- <div>
        <span></span>
        <p></p>
        <strong></strong>
        <i></i>
        <address></address>
    </div> -->
    <script>
    '3. 封装函数，返回元素e 的第n层兄弟元素节点，n为正返回后面的，n为负返回前面的，n为0返回自己'
    // function retSibling(elem, n) {
    //     while (elem && n) {
    //         if (n > 0) {
    //             if (elem.nextElementSibling) {
    //                 elem = elem.nextElementSibling;
    //             } else {
    //                 for (elem = elem.nextSibling; elem && elem.nodeType != 1; elem = elem.nextSibling);
    //             }
    //             n--;
    //         } else {
    //             if (elem.previousElementSibling) {
    //                 elem = elem.previousElementSibling;
    //             } else {
    //                 for(elem = elem.previousSibling; elem && elem.nodeType != 1; elem = elem.previousSibling);
    //             }
    //             n++;
    //         }
    //         return elem;
    //     }
    // }
    // var strong = document.getElementsByTagName('strong')[0];

    </script>
    <!-- <div>
        <b></b>
        <strong>
            <span>
                <i></i>
            </span>
        </strong>
    </div> -->
    <script>
    '4. 编辑函数，封装myChildren功能，解决以前部分浏览器兼容性问题'
    // Element.prototype.myChildren = function () {
    //     var child = this.childNodes,
    //         len = child.length,
    //         arr = [];
    //     for (var i = 0; i < len; i++) {
    //         if (child[i].nodeType == 1) {
    //             arr.push(child[i]);
    //         }
    //     }
    //     return arr;
    // }
    // var div = document.getElementsByTagName('div')[0];

    '5. 封装hasChildren()方法，不可用children属性'


    </script>
    <script>
'DOM 操作'
    '增加'
    // document.createElement();
    // document.createTextNode();
    // document.createComment();
    // document.createDocumentFragment();
    '插入'
    // PARENTNODE.appendChild();
    // PARENTNODE.insertBefore(a, b);
    '删除'
    // parent.removeChild();
    // div.remove();
    '替换'
    // parent.replaceChild(a, b);
    '节点属性'
    // div.innerHTML();
    // div.innerText() 旧版火狐不兼容/textContent 旧版IE不兼容;

    </script>
    <!-- <div></div>
    <span></span>
    <strong></strong> -->
    <script>
'自定义属性'
    // var all = document.getElementsByTagName('*');
    // for (var i = 0; i < all.length; i++) {
    //     all[i].setAttribute('this-name', all[i].nodeName);
    // }

    '练习'
    // function setElement(elem, name) {
    //     var value = document.createElement(elem);
    //     value.setAttribute('class', name);
    //     // value.className = name;
    //     return value;
    // }
    // var div = setElement('div', 'example');
    // var p = setElement('p', 'slogan');
    // var text = document.createTextNode('嘻嘻哈哈');
    // p.appendChild(text);
    // div.appendChild(p);
    // document.body.appendChild(div);

    </script>
    <!-- <div>
        <i></i>
        <b></b>
        <span></span>
    </div> -->
    <script>
    '1. 封装函数insertAfter()，功能类似insertBefore()。直接在Element.prototype上编程'

    // Element.prototype.insertAfter = function(node, index) {

    //     var beforeNode = index.nextElementSibling;

    //     if (beforeNode == null) {
    //         this.appendChild(node);
    //     } else {
    //         this.insertBefore(node, beforeNode);
    //     }
    // }
    // var div = document.getElementsByTagName('div')[0];
    // var b = document.getElementsByTagName('b')[0];
    // var span = document.getElementsByTagName('span')[0];
    // var p = document.createElement('p');

    // div.insertAfter(p, b);


    '2. 将目标节点内部的节点顺序逆序排列'
        'eg: <div><a></a><em></em></div> --> <div><em></em><a></a></div>'
        // Element.prototype.reverseElem = function() {
        //     var len = this.children.length;

        //     for (var i = len - 1; i >= 0; i--) {
        //         this.appendChild(this.children[i]);
        //     }
        // }
        // var div = document.getElementsByTagName('div')[0];
        // div.reverseElem();

    '日期对象'
    // var date = new Date();

    // var timeStar = new Date().getTime(); // Date.now()
    // for (let i = 0; i < 1000000; i++) {
    // }
    // var timeEnd = new Date().getTime();
    // console.log(timeEnd - timeStar + '毫秒');

    // if (new Date().getTime() === Date.now()) {
    //     console.log('Yes'); // yes
    // }

    '返回当前日期'
    // var getTime = function () {
    //     var date = new Date();
    //     var dateYear = date.getFullYear();
    //     var dateMonth = date.getMonth() + 1;
    //     var dateDay = date.getDate();
    //     var dateWeek = date.getDay();
    //     return console.log(dateYear + '年' + dateMonth + '月' + dateDay + '日星期' + dateWeek);
    // }
    // getTime();

    '定时器'
    // var firstTime = Date.now();
    // setInterval(function () {

    //     var lastTime = Date.now();
    //     console.log(lastTime - firstTime);
    //     firstTime = lastTime;

    // }, 1000);

    // var i = 0;
    // setInterval(function() {
    //     console.log(i++);
    //     if (i > 10) {
    //         clearInterval(1);
    //     }
    // }, 100);

    // setTimeout(function(){
    //     console.log('End');
    // }, 3000);

    // var i = 0;
    // setInterval(function() {
    //     console.log(i++);
    // }, 500);
    // setTimeout(function(){
    //     clearInterval(1);
    // }, 3000);
    // clearTimeout(2);
    </script>


    <!-- <style>
        input {
            border: 1px solid rgba(0,0,0,0.8);
            text-align: right;
            font-size: 20px;
            font-weight: bold;
        }
        button {
            display:block;
            margin-left: 45%;
        }
    </style>
    minutes:<input type="text" value="0">
    seconds:<input type="text" value="0">
    <button id="active">开始计时</button> -->
    <script>
    '计时器 三分钟停止'
    // var btn = document.getElementById('active'),
    //     minutesInput = document.getElementsByTagName('input')[0],
    //     secondsInput = document.getElementsByTagName('input')[1],
    //     clicked = true;

    // btn.onclick = function () {
    //     if (clicked) {
    //         clicked = false;
    //         console.log('time begin');
    //         timeBegin();
    //     }
    // }
    // function timeBegin() {
    //     var m = 0,
    //         s = 0;
    //     setInterval(function () {
    //         s++;
    //         if (s === 60) {
    //             s = 0;
    //             m++;
    //         }
    //         secondsInput.value = s;
    //         minutesInput.value = m;
    //         if (m === 3) {
    //             clearInterval(1);
    //         }
    //     }, 20);
    // }
    </script>


    <!-- <style type="text/css">
    div {
        width: 2000px;
        height: 4000px;
        background-color: #eee;
    }
    </style>
    <div></div> -->
    <script>
    '查看滚动条滚动距离'
    // 不兼容IE8及以下
    window.pageXOffset; // 当前页面X轴方向滚动距离
    window.pageYOffset; // 当前页面Y轴方向滚动距离
    // var div = document.getElementsByTagName('div')[0];
    // setInterval(function () {
    //     if (window.pageYOffset > innerHeight) {
    //         div.style.backgroundColor = '#aaa';
    //     } else {
    //         div.style.backgroundColor = '#eee';
    //     }
    // }, 500);

    // IE8及以下兼容混乱
    document.body.scrollLeft;
    document.body.scrollTop;
    document.documentElement.scrollLeft;
    document.documentElement.scrollTop;
    // 解决
    // var xOffset = document.body.scrollLeft + document.documentElement.scrollLeft;

    '封装兼容性方法，求滚动条滚动距离'
    function getScrollOffset(){

        if (window.pageXOffset) {
            return {
                x: window.pageXOffset,
                y: window.pageYOffset
            }
        }else {
            return {
                x: document.body.scrollLeft + document.documentElement.scrollLeft,
                y: document.body.scrollTop + document.documentElement.scrollTop
            }
        }
    };

    '查看可视区窗口大小'
    // IE8及以下不兼容
    window.innerWidth;
    window.innerHeight;

    // IE8及以下 标准模式兼容
    document.documentElement.clientWidth;
    document.documentElement.clientHeight;

    // IE8及以下 怪异模式兼容
    document.body.clientWidth;
    document.body.clientHeight;

    '封装兼容性方法，求可视区窗口大小'
    // var getPageSize = function () {
    //     if (window.innerWidth) {
    //         return {
    //             pageWidth: window.innerWidth,
    //             pageHeight: window.innerHeight
    //         }
    //     } else {
    //         if (document.compatMode == 'CSS1Compat') {
    //             return {
    //                 pageWidth: document.documentElement.clientWidth,
    //                 pageHeight: document.documentElement.clientHeight
    //             }
    //         } else {
    //             return {
    //                 pageWidth: document.body.clientWidth,
    //                 pageHeight: document.body.clientHeight
    //             }
    //         }
    //     }
    // };
    </script>


    <!-- <div id="div" style="width:150px;height:150px;background-color:red;position:absolute;left:100px;top:100px"></div> -->
    <script>
    // var div = document.getElementById('div');
    'ES5 静态查看元素几何尺寸'
    // div.getBoundingClientRect();

    '查看元素尺寸'
    // div.offsetWidth; // 水平占用空间宽度
    // div.offsetHeight; // 垂直占用空间宽度

    //对于无定位父级元素，返回相对文档的坐标；对于一定位父级元素，返回相对于最近有定位父级元素坐标。
    // div.offsetLeft;
    // div.offsetTop;

    // div.offsetParent; // 返回最近有定位父级
    </script>


    <!-- <div id="div" style="width:100%; height:600px; background-color:#eee"></div>
    <button id="btn">More</button> -->
    <script>
    '让滚动条滚动 scroll(X轴滚动距离， Y轴滚动距离)'
    scroll()/scrollTo(); // 滚动到指定坐标
    scrollBy(); // 滚动指定距离

    // var div = document.getElementById('div');
    // var btn = document.getElementById('btn');
    // btn.onclick = function () {
    //     var index = getScrollOffset();
    //     if (btn.innerText == 'More') {
    //         div.style.height = '3000px';
    //         btn.innerText = 'Return';
    //     } else {
    //         div.style.height = '600px';
    //         window.scrollTo(index['x'], index['y']);
    //         btn.innerText = 'More';
    //     }
    // }
    </script>

    <!-- <div id="div" style="width:150px;height:150px;background-color:red;position:absolute;left:100px;top:100px"></div> -->
    <script>
    '计算样式'
    // var div = document.getElementById('div');
    // window.getComputedStyle(div, null);

    '封装兼容性方法 查询最终样式 getStyle(elem, prop)'
    // function getStyle(elem, prop) {
    //     if (window.getComputedStyle) {
    //         return window.getComputedStyle(elem, null)[prop];
    //     } else {
    //         return elem.currentStyle[prop];
    //     }
    // }
    </script>

    <!-- <style type="text/css">
    div {
        width: 150px;
        height: 150px;
        background-color: red;
    }
    .green:after {
        content:"";
        display: inline-block;
        width:50px;
        height: 50px;
        background-color: green;
    }
    .yellow:after {
        content:"";
        display: inline-block;
        width:50px;
        height: 50px;
        background-color: yellow;
    }
    </style>
    <div id="div" class="green"></div> -->
    <script>
    'JS修改样式思想 尽量只修改一次'
    // var div = document.getElementById('div');
    // div.onclick = function() {
    //     // div.style.height = '100px';
    //     // div.style.height = '100px';
    //     // div.style.height = '100px';
    //     div.className = 'yellow';
    // }
    </script>


    <!-- <div id="div" style="width:100px;height:100px;background-color:red;position:absolute;left:0;top:0"></div> -->
    <script>
    '移动方块练习'
    // var speed = 8;
    // var div = document.getElementById('div');
    // var timer = setInterval(function(){
    //     div.style.left = parseInt(getStyle(div, 'left')) + speed + 'px';

    //     if (parseInt(div.style.left) > 500) {
    //         clearInterval(timer);
    //     }
    // }, 30);


    '事件绑定'
    </script>
    <!-- <div id="div" style="width:100px;height:100px;background-color:red;position:absolute;left:0;top:0"></div> -->
    <script>
    'onclick'
    // var div = document.getElementById('div');
    // // 同一个元素只能绑定一个处理函数
    // div.onclick = function () { // 类似于行间样式
    //     this.style.backgroundColor = 'green';
    // }

    'addEventListener(事件类型， 函数，false)'
    // div.addEventListener('click', function(){
    //     console.log('a');
    // }, false);
    // div.addEventListener('click', function(){
    //     console.log('a');
    // }, false);
    // div.addEventListener('click', text, false);
    // function text(){
    //     console.log('c');
    // }

    'IE独有 attachEvent(on + type, fun)'
    // div.attachEvent('onclick', text);


    '练习'
    </script>
    <!-- <ul>
        <li>a</li>
        <li>a</li>
        <li>a</li>
        <li>a</li>
    </ul> -->
    <script>
    // var li = document.getElementsByTagName('li');
    // for (var i = 0; i < li.length; i++) {
    //     (function(i) {
    //         li[i].addEventListener('click', function() {
    //             console.log(i + 1);
    //     }, false)
    //     }(i));
    // }


    '事件处理'
    </script>
    <!-- <div id="div" style="width:100px;height:100px;background-color:red;position:absolute;left:0;top:0"> -->
    <script>
    // var div = document.getElementById('div');
    // div.onclick = function() { // 指向dom元素自己
    //     console.log(this);
    //     this.onclick = null; // 只能执行一次
    // }

    // div.addEventListener('click', function() {
    //     console.log(this);
    // }, false); // 指向dom元素自己
    // div.removeEventListener('click', funName, false); // 指向dom元素自己

    // div.attachEvent('onclick', function() {
    //     console.log(this);
    // }); // 指向window
    // div.detachEvent('onclick', funName); // 指向window

    // 改正指向 window的 BUG
    // div.attachEvent('onclick', handler); // 指向dom元素自己
    // function handler() {
    //     function hand() {
    //         console.log(this);
    //     }
    //     console.log(hand.call(div));
    // }
    // div.detachEvent('onclick', handler); // 指向window


    '兼容性事件处理'
    // function addEvent(elem, type, handle) {
    //     if (elem.addEventListener) {
    //         elem.addEventListener(type, handle, false);
    //     } else if(elem.attachEvent){
    //         elem.attachEvent('on' + type, function(){
    //             handle,call(elem);
    //         })
    //     }else {
    //         elem['on' + type] = handle;
    //     }
    // }


    '事件流'
    </script>
    <!-- <style>
    .wrapper {
        margin-top: 400px;
        width: 200px;
        height: 200px;
        background-color: red;
    }
    </style>
    <div id="div" class="wrapper">
        <a href="#">AcFun</a>
    </div> -->
    <script>
    // document.onclick = function() {
    //     console.log('ABCD');
    // }
    // var div = document.getElementById('div');
    // div.onclick = function(event) {
    //     console.log(event);
    //     stopBubble(event);
    //     this.style.backgroundColor = 'green';
    // }

    '取消事件的进一步捕获或冒泡'
    // function stopBubble(event) {
    //     if (even.stopPropagation) {
    //         even.stopPropagation();
    //     }else {
    //         event.cancelBubble = true;
    //     }
    // }

    '取消鼠标右键默认事件'
    // document.oncontextmenu = function() {
    //     console.log('a');
    //     return false; // 以对象属性的方式注册的事件有效
    // }

    // document.oncontextmenu = function(event) {
    //     console.log('b');
    //     event.preventDefault(); // W3C推荐 IE9以下不兼容
    // }

    // document.oncontextmenu = function(event) {
    //     console.log('b');
    //     event.returnValue = false; // 兼容IE
    // }

    // document.oncontextmenu = function(event) {
    //     console.log('b');
    //     cancelHandler(event);
    // }
    '兼容 取消默认事件'
    // function cancelHandler(event) {
    //     var event = event || window.event;
    //     if (event.preventDefault) {
    //         event.preventDefault();
    //     } else {
    //         event.returnValue = false;
    //     }
    // }

    '取消a标签的默认事件'
    // var a = document.getElementsByTagName('a')[0];
    // a.onclick = function(event) {
    //     cancelHandler(event);
    // }


    '事件源对象'
    </script>
    <!-- <div id="wrap" style="width:200px;height:200px;background-color:red;position:absolute;left:0;top:0">
        <div id="box" style="width:100px;height:100px;background-color:green">
        </div>
    </div>
    <ul id="ul" style="margin-top:200px;">
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
        <li>6</li>
        <li>7</li>
        <li>8</li>
        <li>9</li>
        <li>10</li>
    </ul> -->
    <script>
    // var wrap = document.getElementById('wrap');
    // wrap.onclick = function (event) {
    //     var event = event || window.event;
    //     var target = event.target || event.scrElement;
    //     console.log(target);
    // }
    // '事件委托'
    // var ul = document.getElementById('ul');
    // ul.onclick = function (event) {
    //     var event = event || window.event;
    //     var target = event.target || event.scrElement;
    //     console.log(target.innerText);
    // }


    '复习'
    </script>
    <!-- <style>
    div {
        opacity: 0.8;
        }
    .wrap {
        width: 300px;
        height: 300px;
        background-color: red;
    }
    .box {
        width: 200px;
        height: 200px;
        background-color: blue;

    }
    .content {
        width: 100px;
        height: 100px;
        background-color: yellow;

    }
    .mouse {
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        width:80px;
        height: 100px;
        background-color: #eee;
    }
    </style>
    <div id="div" class="class1 class2 class3">
        <div class="wrap">
            <div class="box">
                <div class="content">
                    <a href="#">Click Me!</a>
                </div>
            </div>
        </div>
    </div>
    <div id="mouseR" class="mouse">
        <ul id="ul">
            <li>1111</li>
            <li>2222</li>
            <li>3333</li>
            <li>4444</li>
        </ul>
    </div> -->
    <script>
    // var mouseR = document.getElementById('mouseR');
    // var div = document.getElementById('div');
    // var divChild = div.children;
    // var wrap = document.getElementsByClassName('wrap')[0];
    // var box = document.getElementsByClassName('box')[0];
    // var content = document.getElementsByClassName('content')[0];

    // var fun = function (event) {
    //     var event = event || window.event;
    //     var target = event.target || event.scrElement;
    //     event.stopPropagation();
    //     console.log(target.className || target.tagName);
    // }
    // wrap.addEventListener('click', fun, false);
    // box.addEventListener('click', fun, false);
    // content.addEventListener('click', fun, false);

    // //模仿右键弹出框，取消鼠标右键默认事件（无法取消弹出框）
    // document.oncontextmenu = function(event) {
    //     // console.log(event);
    //     event.preventDefault(); // W3C推荐 IE9以下不兼容
    //     mouseR.style.display = 'block';
    //     mouseR.style.top = event.clientY + 'px';
    //     mouseR.style.left = event.clientX + 'px';
    // }

    // //'兼容 取消默认事件'
    // function cancelHandler(event) {
    //     var event = event || window.event;
    //     if (event.preventDefault) {
    //         event.preventDefault();
    //     } else {
    //         event.returnValue = false;
    //     }
    // }

    '可拖拽的小方块 onmouseenter onmouseleave onmousemove'
    </script>
    <!-- <style>
    #div {
        position: absolute;
        top: 0;
        left: 0;
        width: 200px;
        height: 200px;
        background-color: #666;
    }
    #useless {
        position: absolute;
        top: 0;
        left: 0;
        width: 400px;
        height: 400px;
        background-color: #eee;
    }
    </style>
    <div id="div"></div>
    <div id="useless"></div> -->
    <script>
    // var div = document.getElementById('div');
    // dragElement('useless');

    
    '点击跳转，按住拖拽'
    </script>
    <!-- <style>
    #div {
        position: absolute;
        width: 200px;
        height: 200px;
        background-color: red;
    }
    </style>
    <i>拖动不能出div，点击跳转</i>
    <div id="div"></div> -->
    <script>
    // var div = document.getElementById('div'),
    // timeBegin = 0,
    // timeENd = 0,
    // clicked = false;
    
    // EventTool.addHandler(div, 'mousedown', function (event) {
    //     timeBegin = Date.now();
    //     var downX = event.clientX;
    //     var downY = event.clientY;
    //     var divX = parseInt(div.style.left) || 0;
    //     var divY = parseInt(div.style.top) || 0;
        
    //     EventTool.addHandler(div, 'mouseup', function (event) {
    //         timeEnd = Date.now();
    //         if (timeEnd - timeBegin < 200) {
    //             clicked = true;
    //         } else {
    //             console.log(event.clientX + ' ' + event.clientY);
    //             div.style.left = divX + event.clientX - downX + 'px';
    //             div.style.top = divY + event.clientY - downY + 'px';
    //         }
    //     })
    // })
    // EventTool.addHandler(div, 'click' ,function(event){
    //     if (clicked) {
    //         console.log('clicked');
    //         clicked = false;
    //     }
    // })

    '随机移动方块 mouseover 怎么点也点不到'
    '方块跟随鼠标方向摆动'
    
    '键盘事件'
    //keyCode keydown 任意按键 不区分大小写
    //charCode  keypress 字符按键

    'input事件'
    </script>
    <!-- <input type="text">
    <div style="height:3000px"></div> -->
    <script>
    // var input = document.getElementsByTagName('input')[0];
    // input.oninput = function(event) {
    //     console.log(this.value);
    // }
    // input.onchange = function(event) {
    //     console.log('---'+ this.value);
    // }

    'scroll事件'
    // window.onscroll = function() {
    //     console.log(window.pageXOffset +' '+ window.pageYOffset);
    // }

    // '二阶菜单栏'
    // '贪吃蛇游戏(跟随上一块身体)'
    // '扫雷游戏(闭包)'
    // '打方块游戏'

    'JSON 数据传输的格式'
    // var obj = {
    //     "name": 'deng',
    //     "age": 12
    // }
    // var str = JSON.stringify(obj);
    // console.log(str);
    // console.log(JSON.parse(str));
    
    'JS异步加载'
    // <script defer = 'defer'>
    // <script async = 'async'>

    // var script = document. createElement('script');
    // script.type = 'text/javascript';
    // script.src = 'D:/github/myTool.js';
    // // 写完地址以后只会下载，并不会执行，直到添加到dom
    // document.head.appendChild(script);

    // // asyncLoading('D:/github/myTool.js', test()); // 报错 test未定义 将函数放入立即执行函数里面
    // asyncLoading('D:/github/myTool.js', () => test());

    'JS加载时间线'
    //TODO: 1. 创建document对象，开始解析web页面。document.readyState='loading'
    //TODO: 2. 遇到link外部css，创建县城加载并继续解析文档。
    //TODO: 3. 遇到script外部JS，并且没有设置async、defer，浏览器加载并阻塞，等待js加载完成并执行该脚本，然后继续解析文档。
    //TODO: 4. 遇到script外部JS，并设置async、defer，浏览器创建线程加载并继续解析文档。async属性的脚本加载完成后立即执行（异步加载禁止document.write()）
    //TODO: 5. 遇到img等，先解析dom结构，然后浏览器异步加载src并继续解析文档。
    //TODO: 6. 当文档解析完成，document.readyState='interactive'
    //TODO: 7. 文档解析完成后，所有设置defer的脚本按顺序执行。async不保证执行顺序。
    //TODO: 8. document对象触发DOMContentLoaded事件，标志着程序执行从同步脚本执行阶段变为事件驱动阶段（可以监听事件）
    //TODO: 9. 当所有async脚本加载并执行、img等加载完成后，document.readyState='complete'，window对象触发load事件
    //TODO:10. 页面异步响应用户事件。
    // console.log(document.readyState); // loading
    // EventTool.addHandler(document, 'readystatechange', () => console.log(document.readyState));
    // EventTool.addHandler(document, 'DOMContentLoaded', () => console.log('a'));

    '图片预加载'
    // var img = new Image();
    // img.src = 'https://nie.res.netease.com/r/pic/20170907/5e19409a-3f67-4949-b493-ff3617d846ba';
    // EventTool.addHandler(img, 'load', () => {
    //     document.body.appendChild(img);
    // })

    '图片懒加载'
    // var btn = document.createElement('button');
    // btn.innerText = '点击加载';
    // document.body.appendChild(btn);
    // EventTool.addHandler(btn, 'click', () => {
    //     // 预加载
    //     var img = new Image();
    //     img.src = 'https://nie.res.netease.com/r/pic/20170907/5e19409a-3f67-4949-b493-ff3617d846ba';
    //     EventTool.addHandler(img, 'load', () => {
    //         document.body.appendChild(img);
    //     })
    // })

    'Math.random'
    // var arr = ['a', 'b', 'c', 'd', 'e'];
    // var value = '';
    // for (let i = 0; i < 3; i++) {
    //     value += arr[parseInt(Math.random()*arr.length)];
    // }
    // console.log(value);

    'byClassName兼容'
    </script>
    <!-- <div class="demo     item          aaa">
        <p class="   bbb    demo">
            <span class="dd cc  demos       "></span>
        </p>
        <li class="li"></li>
    </div> -->
    <script>
    // Document.prototype.getByClassName = function(className) {

    //     var domArr = Array.prototype.slice.call(document.getElementsByTagName('*'), 0);
    //     var filterArr = [];

    //     function dealClass(elem) {
    //         var reg = /\s+/g;
    //         var arrClassName = elem.className.replace(reg, ' ').trim();
    //         return arrClassName;
    //     }

    //     domArr.forEach(function(elem, index) {
    //         var itemClassArr = dealClass(elem).split(' ');
    //         for (let i = 0; i < itemClassArr.length; i++) {
    //             if (itemClassArr[i]  === className) {
    //                 filterArr.push(elem);
    //                 break;
    //             }
    //         }
    //     })
    //     return filterArr;
    // }

    // var aClass = document.getByClassName('demo');
    // console.log(aClass);
    </script>
</body>
</html>
