<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DOM</title>
</head>
<body>

<!-- 小试牛刀 -->

    <!-- <div></div>
    <script>
        // dom 对象
        var div = document.getElementsByTagName('div')[0];
        div.style.width = '100px';
        div.style.height = '100px';
        div.style.backgroundColor = '#eee';

        var count = 0;
        div.onclick = function() {

            count++;
            if (count % 2 == 1) {
                this.style.backgroundColor = '#aaa';
            } else {
                this.style.backgroundColor = '#eee';
            }
        }
    </script>  -->


    <!-- <style>
        .content {
            display: none;
            border:2px solid #eee;
            width: 120px;
            height: 100px;
        }
        div .active {
            background-color: #f50;
        }
    </style>

    <div class="wrap">
        <button class="active">111</button>
        <button>222</button>
        <button>333</button>
        <div class="content" style="display: block;">AAAAAAAAAAA</div>
        <div class="content">BBBBBBBBBB</div>
        <div class="content">CCCCCCCCCCC</div>
    </div>

    <script>
    var btn = document.getElementsByTagName('button');
    var div = document.getElementsByClassName('content');

    for (var i = 0; i < btn.length; i++) {
        (function (act) {
            btn[i].onclick = function () {

                for (var j = 0; j < btn.length; j++) {
                    btn[j].className = '';
                    div[j].style.display = 'none';
                }
                this.className = 'active';
                div[act].style.display = 'block';
            };
        }(i));
    }
    </script>  -->


    <!-- <script>
    var div = document.createElement('div');
    document.body.appendChild(div);
    div.style.width = '100px';
    div.style.height = '100px';
    div.style.backgroundColor = '#eee';
    div.style.position = 'absolute';
    div.style.top = '100px';
    div.style.left = '100px';

    ////方块加速移动
    // var speed = 1;
    // var timer = setInterval(function () {

    //     speed += speed/20;
    //     div.style.left = parseInt(div.style.left) + speed + 'px';
    //     div.style.top = parseInt(div.style.top) + speed + 'px';
    //     if (parseInt(div.style.left) > 400 && parseInt(div.style.top) > 400) {
    //         clearInterval(timer);
    //     }
    // }, 35);

    ////方向键控制方块移动
    document.onkeydown = function (e) {
        // console.log(e)
        var speed = 100;
        switch (e.which) {
            case 38:
                div.style.top = parseInt(div.style.top) - speed + 'px';
                break;
            case 40:
                div.style.top = parseInt(div.style.top) + speed + 'px';
                break;
            case 37:
                div.style.left = parseInt(div.style.left) - speed + 'px';
                break;
            case 39:
                div.style.left = parseInt(div.style.left) + speed + 'px';
                break;
            default:
                break;
        }
    }
    </script> -->


    <!-- <style>
        /* 模仿画笔 */
        * {
            margin: 0;
            padding: 0;
        }
        li {
            box-sizing:border-box;
            float: left;
            width: 20px;
            height: 20px;
            border: 1px solid black;
            list-style: none;
        }
        ul {
            width: 300px;
            height: 300px;
        }
    </style>
    <ul>
        <li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li><li img-date = "0"></li>
    </ul>
    <script>
    var ul = document.getElementsByTagName('ul')[0];
    ul.onmouseover = function (e) {
        var event = e || window.event;
        var target = event.target || event.srcElement;

        target.style.backgroundColor = 'rgb(255,255,' + target.getAttribute('img-date') +')';
        target.setAttribute('img-date', parseInt(target.getAttribute('img-date')) + 20);
    }
    </script> -->

<!-- DOM基本操作 -->

    <!-- <div id="only" class="d-class">
        <span>
            <strong>1</strong>
        </span>
        <strong>2</strong>
    </div>
    <input name="my-name">
    <script>

    // document生成的大部分都是类数组
    var id = document.getElementById('only');
    var tagName = document.getElementsByTagName('div')[0];
    var cName = document.getElementsByClassName('d-class')[0]; // ie8及以下版本不支持
    var name = document.getElementsByName('my-name')[0]; // 只有带name属性的标签可生效

    // query选出来的元素不是实时的,是静态副本
    var strong = document.querySelector('div > span strong');
    var strong1 = document.querySelectorAll('strong')[0];
    </script> -->

<!-- 遍历节点树 -->

    <!-- <div>
        第一句话和空格一起算文本
        <strong></strong>
        <span></span>
    </div>

    <script>
    var div = document.getElementsByTagName('div')[0];
    var strong = document.getElementsByTagName('strong')[0];

    console.log(div.parentNode); // 父节点
    console.log(div.childNodes); // 子节点们
    console.log(div.childNodes.length);
    // 元素节点 ———— Node.ELEMENT_NODE(1)
    // 属性节点 ———— Node.ATTRIBUTE_NODE(2)
    // 文本节点 ———— Node.TEXT_NODE(3)
    // 注释节点 ———— Node.COMMENT_NODE(8)
    // document节点 ———— Node.DOCUMENT_NODE(9)
    // DocumentsFragment ———— Node.DOCUMENT_FRAGMENT_NODE(11)

     console.log(div.firstChild); // 第一个子节点
     console.log(div.lastChild); // 最后一个子节点
     console.log(strong.nextSibling); // 后一个兄弟节点
     console.log(strong.perviousSibling); // 前一个兄弟节点
    </script> -->

<!-- 遍历元素节点树 -->

    <!-- <div>
        第一句话和空格一起算文本
        <strong></strong>
        <span></span>
        <em></em>
        <i></i>
        <b></b>
    </div> -->

    <script>
    '除了children以外 IE8及以下不兼容'
    // var div = document.getElementsByTagName('div')[0];
    // var strong = document.getElementsByTagName('strong')[0];

    // console.log(div.parentElement); // 返回当前元素的父元素节点
    // console.log(div.children); // 只返回当前元素的元素子节点
    // console.log(div.firstElementChild); // 返回第一个元素子节点
    // console.log(div.lastElementChild); // 返回最后一个元素子节点

    // console.log(strong.nextElementSibling); // 返回最后一个兄弟元素
    // console.log(strong.previousElementSibling); // 返回前一个兄弟元素
    </script>



    <!-- <div>
        第一句话和空格一起算文本
        <strong></strong>
        <span></span>
    </div>
    <div>
    </div> -->

    <script>
'节点的四个属性'
    // var div = document.getElementsByTagName('div')[0];
    // console.log(div.childNodes[1].nodeName); // 元素的标签名，以大写形式表示，只读

    // console.log(div.childNodes[0].nodeValue); // text 节点或comment 节点的文本内容，可读写
    // div.childNodes[0].nodeValue = '字体已修改';
    // console.log(div.childNodes[0].nodeValue);

    // console.log(div.childNodes[1].nodeType); // 该节点的类型，只读
    // // 元素节点 ———— Node.ELEMENT_NODE(1)
    // // 属性节点 ———— Node.ATTRIBUTE_NODE(2)
    // // 文本节点 ———— Node.TEXT_NODE(3)
    // // 注释节点 ———— Node.COMMENT_NODE(8)
    // // document节点 ———— Node.DOCUMENT_NODE(9)
    // // DocumentsFragment ———— Node.DOCUMENT_FRAGMENT_NODE(11)
    // console.log(div.childNodes[1].attributes); // Element节点的属性集合

    // var div2 = document.getElementsByTagName('div')[0];
    // console.log(div2.hasChildNodes()); // 是否有自己的子节点

    // function retElementChild(node) {
    //     //no children
    //     var temp = {
    //             length: 0,
    //             push: Array.prototype.push
    //     },
    //         child = node.childNodes,
    //         len = child.length;

    //     for (var i = 0; i < len; i++) {
            
    //         if (child[i].nodeType === 1) {
    //             temp.push(child[i]);
    //         }
    //     }
    //     return temp;
    // }
    // console.log(retElementChild(div));

    '继承关系'
    // HTMLBodyElement.prototype.abc = 'demo';
    // var body = document.getElementsByTagName('body')[0];
    // var head = document.getElementsByTagName('head')[0];
    // console.log(body.abc +' '+ head.abc);

    // HTMLElement.prototype.abc = 'demo';
    // var body = document.getElementsByTagName('body')[0];
    // var head = document.getElementsByTagName('head')[0];
    // console.log(body.abc +' '+ head.abc);


    '1. 遍历元素节点树(原型链上编程)'
    </script>


    <!-- <div>
        <b></b>
        abc -->
        <!-- this is comment -->
        <!-- <strong>
            <span>
                <i></i>
            </span>
        </strong>
    </div> -->
    <script>
    '2. 封装函数，返回元素e 的第n层父元素节点'
    // function retParent(elem, n) {
    //     while(n && elem) {
    //         elem = elem.parentElement;
    //         n--;
    //     }
    //     return elem;
    // }
    // var i = document.getElementsByTagName('i')[0];


    </script>
    <!-- <div>
        <span></span>
        <p></p>
        <strong></strong>
        <i></i>
        <address></address>
    </div> -->
    <script>
    '3. 封装函数，返回元素e 的第n层兄弟元素节点，n为正返回后面的，n为负返回前面的，n为0返回自己'
    // function retSibling(elem, n) {
    //     while (elem && n) {
    //         if (n > 0) {
    //             if (elem.nextElementSibling) {
    //                 elem = elem.nextElementSibling;
    //             } else {
    //                 for (elem = elem.nextSibling; elem && elem.nodeType != 1; elem = elem.nextSibling);
    //             }
    //             n--;
    //         } else {
    //             if (elem.previousElementSibling) {
    //                 elem = elem.previousElementSibling;
    //             } else {
    //                 for(elem = elem.previousSibling; elem && elem.nodeType != 1; elem = elem.previousSibling);
    //             }
    //             n++;
    //         }
    //         return elem;
    //     }
    // }
    // var strong = document.getElementsByTagName('strong')[0];

    </script>
    <!-- <div>
        <b></b>
        <strong>
            <span>
                <i></i>
            </span>
        </strong>
    </div> -->
    <script>
    '4. 编辑函数，封装myChildren功能，解决以前部分浏览器兼容性问题'
    // Element.prototype.myChildren = function () {
    //     var child = this.childNodes,
    //         len = child.length,
    //         arr = [];
    //     for (var i = 0; i < len; i++) {
    //         if (child[i].nodeType == 1) {
    //             arr.push(child[i]);
    //         }
    //     }
    //     return arr;
    // }
    // var div = document.getElementsByTagName('div')[0];

    '5. 封装hasChildren()方法，不可用children属性'


    </script>
    <script>
'DOM 操作'
    '增加'
    // document.createElement();
    // document.createTextNode();
    // document.createComment();
    // document.createDocumentFragment();
    '插入'
    // PARENTNODE.appendChild();
    // PARENTNODE.insertBefore(a, b);
    '删除'
    // parent.removeChild();
    // div.remove();
    '替换'
    // parent.replaceChild(a, b);
    '节点属性'
    // div.innerHTML();
    // div.innerText() 旧版火狐不兼容/textContent 旧版IE不兼容;

    </script>
    <!-- <div></div>
    <span></span>
    <strong></strong> -->
    <script>
'自定义属性'
    // var all = document.getElementsByTagName('*');
    // for (var i = 0; i < all.length; i++) {
    //     all[i].setAttribute('this-name', all[i].nodeName);
    // }
    
    '练习'
    // function setElement(elem, name) {
    //     var value = document.createElement(elem);
    //     value.setAttribute('class', name);
    //     // value.className = name;
    //     return value;
    // }
    // var div = setElement('div', 'example');
    // var p = setElement('p', 'slogan');
    // var text = document.createTextNode('嘻嘻哈哈');
    // p.appendChild(text);
    // div.appendChild(p);
    // document.body.appendChild(div);

    </script>
    <div>
        <i></i>
        <b></b>
        <span></span>
    </div>
    <script>
    '1. 封装函数insertAfter()，功能类似insertBefore()。直接在Element.prototype上编程'

    // Element.prototype.insertAfter = function(node, index) {

    //     var beforeNode = index.nextElementSibling;

    //     if (beforeNode == null) {
    //         this.appendChild(node);
    //     } else {
    //         this.insertBefore(node, beforeNode);
    //     }
    // }
    // var div = document.getElementsByTagName('div')[0];
    // var b = document.getElementsByTagName('b')[0];
    // var span = document.getElementsByTagName('span')[0];
    // var p = document.createElement('p');

    // div.insertAfter(p, b);


    '2. 将目标节点内部的节点顺序逆序排列'
        'eg: <div><a></a><em></em></div> --> <div><em></em><a></a></div>'
        // Element.prototype.reverseElem = function() {
        //     var len = this.children.length;

        //     for (var i = len - 1; i >= 0; i--) {
        //         this.appendChild(this.children[i]);
        //     }
        // }
        var div = document.getElementsByTagName('div')[0];
        // div.reverseElem();
    </script>

</body>
</html>
